(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"1mKj":function(e,t,n){"use strict";n.r(t);var o=n("KHd+"),v=Object(o.a)({},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"markdown"},[n("h2",[e._v("create-api module")]),e._v(" "),e._m(0),e._v(" "),e._m(1),e._v(" "),n("h3",[e._v("createAPI(Vue, Component, [events, single])")]),e._v(" "),n("ul",[e._m(2),e._v(" "),e._m(3),e._v(" "),n("li",[n("p",[e._v("Example:")]),e._v(" "),n("p",[e._v("First we create Hello.vue component：")]),e._v(" "),n("pre",[n("code",{staticClass:"language-html"},[e._v('<template>\n  <div @click="clickHandler">\n    '+e._s(e.content)+"\n    <slot name=\"other\"></slot>\n  </div>\n</template>\n\n<script type=\"text/ecmascript-6\">\n  export default {\n    name: 'hello',\n    props: {\n      content: {\n        type: String,\n        default: 'Hello'\n      }\n    },\n    methods: {\n      clickHandler(e) {\n        this.$emit('click', e)\n      }\n    }\n  }\n<\/script>\n")])]),e._v(" "),e._m(4),e._v(" "),e._m(5),e._v(" "),e._m(6)])]),e._v(" "),n("h3",[e._v("How to use in general JS files or use it in global")]),e._v(" "),e._m(7),e._v(" "),e._m(8),e._v(" "),n("p",[e._v("Or components in cube-ui, like Dialog:")]),e._v(" "),e._m(9),e._v(" "),n("p",[e._v("There is another idea which used the mode of data-driven. For example, in vuex, you could use a global state to label whether to call the component, and watch this state in App.vue to handle this component.")])])},[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v("This module exports a function called "),n("code",[e._v("createAPI")]),e._v(" with which you can invoke the custom component which has been instantiated in api form. And It could be called both in Vue instance context and "),n("a",{attrs:{href:"https://didi.github.io/cube-ui/#/en-US/docs/create-api#cube-HowtouseingeneralJSfilesoruseitinglobal-anchor"}},[e._v("general js file")]),e._v(".")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[n("strong",[e._v("Notice:")]),e._v(" All cube-ui componnets which used "),n("code",[e._v("createAPI")]),e._v(" must be registered by "),n("code",[e._v("Vue.use")]),e._v(".")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",[n("p",[e._v("Parameters:")]),e._v(" "),n("ul",[n("li",[n("code",[e._v("{Function} Vue")]),e._v(" Vue function")]),e._v(" "),n("li",[n("code",[e._v("{Function | Object} Component")]),e._v(" Vue component which must contains "),n("code",[e._v("name")])]),e._v(" "),n("li",[n("code",[e._v("{Array} [events]")]),e._v(" the collection of the instantiated Vue Component's event name")]),e._v(" "),n("li",[n("code",[e._v("{Boolean} [single]")]),e._v(" whether singleton")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",[n("p",[e._v("Usage:")]),e._v(" "),n("ul",[n("li",[n("p",[e._v("This method will add a method which is named "),n("code",[e._v("$create{camelize(Component.name)}")]),e._v(" to Vue's prototype, so you can instantiate the Vue component by "),n("code",[e._v("const instance = this.$createAaBb(config, [renderFn, single])")]),e._v(" in other components. The instantiated component's template content will be attached to "),n("code",[e._v("body")]),e._v(" element.")])]),e._v(" "),n("li",[n("p",[n("code",[e._v("const instance = this.$createAaBb(config, renderFn, single)")])]),e._v(" "),n("p",[n("strong",[e._v("Parameters：")])]),e._v(" "),n("table",[n("thead",[n("tr",[n("th",[e._v("Attribute")]),e._v(" "),n("th",[e._v("Description")]),e._v(" "),n("th",[e._v("Type")]),e._v(" "),n("th",[e._v("Accepted Values")]),e._v(" "),n("th",[e._v("Default")])])]),e._v(" "),n("tbody",[n("tr",[n("td",[e._v("config")]),e._v(" "),n("td",[e._v("Config options")]),e._v(" "),n("td",[e._v("Object")]),e._v(" "),n("td",[e._v("{}")]),e._v(" "),n("td",[e._v("-")])]),e._v(" "),n("tr",[n("td",[e._v("renderFn")]),e._v(" "),n("td",[e._v("Optional, used to generate the VNode child node in the slot scene in general")]),e._v(" "),n("td",[e._v("Function")]),e._v(" "),n("td",[e._v("-")]),e._v(" "),n("td",[e._v("function (createElement) {...}")])]),e._v(" "),n("tr",[n("td",[e._v("single")]),e._v(" "),n("td",[e._v("Optional, whether the instantiated component is a singleton or not. If two parameters are provided and the "),n("code",[e._v("renderFn")]),e._v("'s type is not function, then the "),n("code",[e._v("single")]),e._v(" value is the sencond parameter's value.")]),e._v(" "),n("td",[e._v("Boolean")]),e._v(" "),n("td",[e._v("single in createAPI()")]),e._v(" "),n("td",[e._v("-")])])])]),e._v(" "),n("p",[n("strong",[e._v("Config options "),n("code",[e._v("config")]),e._v(":")])]),e._v(" "),n("p",[e._v("It will be passed to the component as its props except the events in "),n("code",[e._v("events")]),e._v("(It will transform by default, eg: If "),n("code",[e._v("events")]),e._v(" has value "),n("code",[e._v("['click']")]),e._v(", then the prop "),n("code",[e._v("onClick")]),e._v(" will be treated as component's event and not component's props).")]),e._v(" "),n("p",[e._v("After 1.8.0+, you can set "),n("code",[e._v("$props")]),e._v(" and "),n("code",[e._v("$events")]),e._v(" in "),n("code",[e._v("config")]),e._v(", "),n("code",[e._v("$props")]),e._v(" supported reactive properties, these props will be watched.")]),e._v(" "),n("table",[n("thead",[n("tr",[n("th",[e._v("Attribute")]),e._v(" "),n("th",[e._v("Description")]),e._v(" "),n("th",[e._v("Type")]),e._v(" "),n("th",[e._v("Accepted Values")]),e._v(" "),n("th",[e._v("Default")])])]),e._v(" "),n("tbody",[n("tr",[n("td",[e._v("$props")]),e._v(" "),n("td",[e._v("Component props")]),e._v(" "),n("td",[e._v("Object")]),e._v(" "),n("td",[e._v("-")]),e._v(" "),n("td",[e._v("{<br> title: 'title',<br> content: 'my content',<br> open: false<br>}")])]),e._v(" "),n("tr",[n("td",[e._v("$events")]),e._v(" "),n("td",[e._v("Component event handlers")]),e._v(" "),n("td",[e._v("Object")]),e._v(" "),n("td",[e._v("-")]),e._v(" "),n("td",[e._v("{<br> click: 'clickHandler',<br> select: this.selectHandler<br>}")])])])]),e._v(" "),n("p",[n("code",[e._v("$props")]),e._v(" example, "),n("code",[e._v("{ [key]: [propKey] }")]),e._v(":")]),e._v(" "),n("pre",[n("code",{staticClass:"language-js"},[e._v("{\n  title: 'title',\n  content: 'my content',\n  open: false\n}\n")])]),e._v(" "),n("p",[n("code",[e._v("title")]),e._v(", "),n("code",[e._v("content")]),e._v(" and "),n("code",[e._v("open")]),e._v(" are keys of the component prop, and the prop' value will be taken by the following steps:")]),e._v(" "),n("ol",[n("li",[e._v("If "),n("code",[e._v("propKey")]),e._v(" is not a string value, then use "),n("code",[e._v("propKey")]),e._v(" as the prop value.")]),e._v(" "),n("li",[e._v("If "),n("code",[e._v("propKey")]),e._v(" is a string value and the caller instance dont have the "),n("code",[e._v("propKey")]),e._v(" property, then use "),n("code",[e._v("propKey")]),e._v(" as the prop value.")]),e._v(" "),n("li",[e._v("If "),n("code",[e._v("propKey")]),e._v(" is a string value and the caller instance have the "),n("code",[e._v("propKey")]),e._v(" property, then use the caller's "),n("code",[e._v("propKey")]),e._v(" property value as the prop value. And the prop value will be reactively.")])]),e._v(" "),n("p",[n("code",[e._v("$events")]),e._v(" example, "),n("code",[e._v("{ [eventName]: [eventValue] }")]),e._v(":")]),e._v(" "),n("pre",[n("code",{staticClass:"language-js"},[e._v("{\n  click: 'clickHandler',\n  select: this.selectHandler\n}\n")])]),e._v(" "),n("p",[n("code",[e._v("click")]),e._v(" and "),n("code",[e._v("select")]),e._v(" are event names, and the event handlers will be taken by the following steps:")]),e._v(" "),n("ol",[n("li",[e._v("If "),n("code",[e._v("eventValue")]),e._v(" is not a string value, then use "),n("code",[e._v("eventValue")]),e._v(" as the event handler.")]),e._v(" "),n("li",[e._v("If "),n("code",[e._v("eventValue")]),e._v(" is a string value, then use the caller's "),n("code",[e._v("eventValue")]),e._v(" property value as the event handler.")])]),e._v(" "),n("p",[e._v("After 1.10.0+, you can set "),n("a",{attrs:{href:"https://vuejs.org/v2/guide/render-function.html#The-Data-Object-In-Depth"}},[e._v("all avaliable properties in Vue")]),e._v(", but you need to add prefix "),n("code",[e._v("$")]),e._v(", eg:")]),e._v(" "),n("pre",[n("code",{staticClass:"language-js"},[e._v("this.$createAaBb({\n  $attrs: {\n    id: 'id'\n  },\n  $class: {\n    'my-class': true\n  }\n})\n")])]),e._v(" "),n("p",[n("strong",[e._v("The Returned value "),n("code",[e._v("instance")]),e._v(":")])]),e._v(" "),n("p",[n("code",[e._v("instance")]),e._v(" is a instantiated Vue component.")]),e._v(" "),n("blockquote",[n("p",[e._v("And the "),n("code",[e._v("remove")]),e._v(" method will be "),n("strong",[e._v("attached")]),e._v(" to this instance.")])]),e._v(" "),n("p",[e._v("You can invoke the "),n("code",[e._v("remove")]),e._v(" method to destroy the component and detach the component's content from "),n("code",[e._v("body")]),e._v(" element.")]),e._v(" "),n("p",[e._v("If the caller is destroyed and the "),n("code",[e._v("instance")]),e._v(" will be destroyed too.")])])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v("Then we make Hello.vue to an API style component by calling the "),n("code",[e._v("createAPI")]),e._v(" method.")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("pre",[n("code",{staticClass:"language-js"},[e._v("  import Vue from 'vue'\n  import Hello from './Hello.vue'\n\n  // import Style to load the base style\n  import {\n    /* eslint-disable no-unused-vars */\n    Style,\n    Dialog,\n    createAPI\n  } from 'cube-ui'\n\n  Vue.use(Dialog)\n\n  // create this.$createHello API\n  createAPI(Vue, Hello, ['click'], true)\n\n  // init Vue\n  new Vue({\n    el: '#app',\n    render: function (h) {\n      return h('button', {\n        on: {\n          click: this.showHello\n        }\n      }, ['Show Hello'])\n    },\n    methods: {\n      showHello() {\n        /* The first parameter of `$createHello` will be passed to the component as its props except the events in `events`(It will transform by default, eg: If `events` has value `['click']`, then the prop `onClick` will be treated as component's event and not component's props) */\n        const instance = this.$createHello({\n          content: 'My Hello Content',\n          onClick(e) {\n            console.log('Hello component clicked.')\n          }\n        }, /* renderFn */ (createElement) => {\n          return [\n            createElement('p', {\n              slot: 'other'\n            }, 'other content')\n          ]\n        })\n        // Also, the event hanlder can be registered by instance's `$on` method\n        instance.$on('click', (e) => {\n          const $dialog = this.$createDialog({\n            type: 'confirm',\n            content: 'click confirm to remove current instance',\n            icon: 'cubeic-alert'\n          })\n          $dialog.show()\n\n          $dialog.$on('confirm', () => {\n            // remove instance\n            instance.remove()\n          }).$on('cancel', () => {\n            console.log('cancel')\n          })\n        })\n      }\n    }\n  })\n")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v("In this example, we create a component "),n("code",[e._v("Hello")]),e._v(" which needs to be invoked in api form and we invoke it in another component.The focus is what "),n("code",[e._v("showHello()")]),e._v(" does: invoking method "),n("code",[e._v("this.$createHello(config, renderFn)")]),e._v(" to instantiate "),n("code",[e._v("Hello")]),e._v(".")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v("In vue component, you could call by "),n("code",[e._v("this.$createHello(config, renderFn)")]),e._v(" because the "),n("code",[e._v("this")]),e._v(" is just a Vue instance. But in general JS files, you need to use "),n("code",[e._v("Hello.$create")]),e._v(". As shown below:")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("pre",[n("code",{staticClass:"language-js"},[e._v("import Vue from 'vue'\nimport Hello from './Hello.vue'\n\nimport {\n  createAPI\n} from 'cube-ui'\n\n// 创建 this.$createHello and $Hello.create API\ncreateAPI(Vue, Hello, ['click'], true)\n\nHello.$create(config, renderFn)\n")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("pre",[n("code",{staticClass:"language-js"},[e._v("import Vue from 'vue'\nimport { Dialog } from 'cube-ui'\n\nVue.use(Dialog)\n\nDialog.$create({\n  ...\n})\n")])])}],!1,null,null,null);t.default=v.exports}}]);